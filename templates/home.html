<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='stylesheet.css') }}">
  </head>
  <body>

    <form method="GET" action="/">
        <label for="sort">Sort by:</label>
          <select name="sort" id="sort">
            <option value="">-- Sort by --</option>
            <option value="title">Title</option>
            <option value="author">Author</option>
          </select>

          <select name="direction">
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
          </select>
        <button type="submit">Sort</button>
    <br><br>
        <label for="search">Search in book title or author name:</label>
          <input type="text" id="search" name="search">
          <input type="submit" value="Search">
    </form>
        <br><br>
    <div class="book-container">
    {% if books %}
      {% for book in books %}
        <div class="book-item" style="clear: both; margin-bottom: 20px; overflow: auto;">
            {% if book.cover_url %}
              <img src="{{ book.cover_url }}" alt="Book cover">
            {% else %}
              <img src="/static/placeholder.jpg" alt="No cover available">
            {% endif %}

      <div class="book-details">
        <div> <h3>{{ book.title }} â€” {{ book.author.author_name }}</h3>
            <form action="{{ url_for('delete_book', book_id=book.book_id) }}"
                  method="POST"
                  style="display:inline;">
                <input type="submit" value="Delete" class="btn-delete">
            </form>
        </div>
      </div>
        {% endfor %}
    {% else %}
        <p>No books found.</p>
  {% endif %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  </body>
</html>